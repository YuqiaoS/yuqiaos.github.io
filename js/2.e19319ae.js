(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"7fcb":function(t,s,e){"use strict";var a=e("cfc8"),r=e.n(a);r.a},bff0:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-card",{attrs:{bordered:""}},[e("q-card-actions",{staticClass:"q-gutter-md"},[e("q-input",{attrs:{size:"50",outlined:"",dense:"",autofocus:"","stack-label":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"link"}})]},proxy:!0},{key:"after",fn:function(){return[e("q-btn",{attrs:{push:"",outlined:"",icon:"refresh",color:"orange"}},[t._v("\n          Load\n        ")])]},proxy:!0}]),model:{value:t.imgSrc,callback:function(s){t.imgSrc=s},expression:"imgSrc"}}),e("q-select",{staticStyle:{width:"200px"},attrs:{outlined:"",dense:"",options:t.optionsLang,label:"Select language"},on:{input:function(s){return t.workerLoadLanguage(t.selectedLang.value)}},model:{value:t.selectedLang,callback:function(s){t.selectedLang=s},expression:"selectedLang"}})],1),e("q-separator"),e("q-card-section",{staticClass:"row",attrs:{horizontal:""}},[e("div",{staticClass:"col"},[e("div",{staticClass:"img-wrapper",staticStyle:{position:"relative"}},[e("canvas",{ref:"imgCanvas",staticClass:"c-canvas",attrs:{height:t.imgHeight,width:t.imgWidth}}),e("img",{ref:"srcImg",staticClass:"canvas-img",attrs:{id:"srcImg",src:t.imgSrc,crossorigin:"anonymous"}}),e("q-resize-observer",{on:{resize:t.onImgResize}})],1)]),e("q-separator",{attrs:{vertical:""}}),e("div",{staticClass:"column col justify-around self-center"},[e("div",{staticClass:"column justify-around items-center self-center q-gutter-md"},[e("div",{staticClass:"col-4"},[e("q-btn",{attrs:{loading:!t.statusWorkerReady,disable:!t.statusWorkerReady,color:t.btnTranslateAllColor},on:{click:t.workerTranslate},scopedSlots:t._u([{key:"loading",fn:function(){return[e("q-spinner-hourglass",{staticClass:"on-left"})]},proxy:!0}])},[t._v("\n            Translate All\n            ")])],1),e("div",{staticClass:"col-4 justify-center"},[e("div",{staticClass:"text-h6"},[t._v(" Translate Worker Status ")]),e("q-separator",{attrs:{inset:""}}),e("q-linear-progress",{attrs:{stripe:"",size:"10px",value:t.statusWorkerProgress}}),e("p",{attrs:{id:"statusWorker"}},[t._v(" "+t._s(t.statusWorker)+" ")]),e("canvas",{ref:"drawCanvas",attrs:{height:t.imgHeight,width:t.imgWidth}})],1)])]),e("q-separator",{attrs:{vertical:""}}),e("div",{staticClass:"col",domProps:{innerHTML:t._s(t.translatedText)}})],1)],1)},r=[],i=(e("e6cf"),e("5319"),e("c9bf")),n={name:"OCR",data(){return{imgHeight:400,imgWidth:300,imgSrc:"imgs/chi_sim.png",translatedText:"",imgCanvasCtx:null,drawCanvasCtx:null,tesWorker:null,selectedLang:{label:"中文",value:"chi_sim"},optionsLang:[{label:"English",value:"eng"},{label:"中文",value:"chi_sim"}],btnTranslateAllStatus:"success",statusWorker:"",statusWorkerReady:!1,statusWorkerProgress:0}},computed:{btnTranslateAllColor(){return this.statusWorkerReady?"positive":"orange"},btnTranslateAllLoading(){return!this.statusWorkerReady},btnWorkerIcon(){return this.statusWorkerReady?"":"loading"}},methods:{drawImgToCanvas(){this.imgCanvasCtx.drawImage(this.$refs.srcImg,0,0,this.imgWidth,this.imgHeight),console.log("drawing to canvas",this.$refs.srcImg,this.imgWidth,this.imgHeight)},drawSelectArea(){this.drawCanvasCtx.drawImage(this.$refs.srcImg,0,0,this.imgWidth,this.imgHeight)},onImgResize(t){console.log("onImgResize: ",t),this.imgWidth=t.width,this.imgHeight=t.height},async workerTranslate(){this.statusWorkerReady=!1;const{data:{text:t}}=await this.worker.recognize(this.$refs.srcImg);console.log(t),console.log(JSON.stringify(t)),this.translatedText=t.replace(/\n|\r|\r\n/gm,"<br>"),this.statusWorkerReady=!0},async workerLoadLanguage(t){this.statusWorkerReady=!1,await this.worker.loadLanguage(t),await this.worker.initialize(t),this.statusWorkerReady=!0}},async mounted(){this.imgCanvasCtx=this.$refs.imgCanvas.getContext("2d"),this.drawCanvasCtx=this.$refs.drawCanvas.getContext("2d"),this.worker=Object(i["createWorker"])({logger:t=>{this.statusWorker=t,this.statusWorkerProgress=t.progress}}),await this.worker.load(),await this.workerLoadLanguage(this.selectedLang.value)},async beforeDestroy(){await this.worker.terminate()}},o=n,l=(e("7fcb"),e("2877")),c=e("f09f"),g=e("4b7e"),d=e("27f9"),u=e("0016"),h=e("9c40"),m=e("ddd8"),f=e("eb85"),v=e("a370"),p=e("068f"),k=e("3980"),w=e("9149"),C=e("6b1d"),b=e("eebe"),y=e.n(b),W=Object(l["a"])(o,a,r,!1,null,"08e169ec",null);s["default"]=W.exports;y()(W,"components",{QCard:c["a"],QCardActions:g["a"],QInput:d["a"],QIcon:u["a"],QBtn:h["a"],QSelect:m["a"],QSeparator:f["a"],QCardSection:v["a"],QImg:p["a"],QResizeObserver:k["a"],QSpinnerHourglass:w["a"],QLinearProgress:C["a"]})},cfc8:function(t,s,e){}}]);